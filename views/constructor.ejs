<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		
		<link rel='stylesheet' type="text/css"><link rel="stylesheet" href="/css/estilos.css" >"
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<ul>
		  <li><a href="/mazos">mazos</a></li>
		  <li><a href="/visualizador">buscador</a></li>
		  <li><a href="mazos_publicos">Mazos publicos</a></li>
		  <li style="float:right"><a class="active" href="/logout">logout</a></li>
		</ul>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("agregarCarta");

  form.addEventListener("submit", (event) => {
    event.preventDefault();
    const codigoCarta = document.getElementById("codigo-carta").value;
    const cantidad = document.getElementById("cantidad").value;
    agregarCarta(codigoCarta, cantidad);
  });
});
    </script>
	  </head>
    <body>
 
    
    

      <!-- Mostrar la lista de cartas en el mazo -->
      <ul>
        <h1>Mazo {{ mazo.nombre }}</h1>
        {{#each cartasMazo}}
          <li>
            {{this.nombre}} ({{this.cantidad}})
            <form method="post" action="/mazo/{{../mazo.id}}/carta/{{this.codigo}}/eliminar">
              <button type="submit">Eliminar</button>
            </form>
          </li>
        {{/each}}
      </ul>
      
      <!-- Agregar formulario para agregar cartas al mazo -->
      <form method="post" action="/mazo/{{mazo.id}}/agregar-carta">
        <label for="codigo_carta">CÃ³digo de carta:</label>
        <input type="text" name="codigo_carta" id="codigo_carta">
        <button type="submit">Agregar</button>
      </form>
      
      <!-- Mostrar la lista de cartas disponibles -->
      <h2>Cartas disponibles</h2>
      
      <form method="get" action="/mazo/{{mazo.id}}">
        <label for="filtro_nombre">Filtrar por nombre:</label>
        <input type="text" name="filtro_nombre" id="filtro_nombre" value="">
        <button type="submit">Buscar</button>
      </form>
      
      <ul>
        {{#each cartasDisponibles}}
          <li>
            {{this.nombre}} <a href="/carta/{{this.codigo}}">Ver detalles</a>
            {{#if this.enMazo}}
              (En mazo: {{this.cantidad}})
            {{else}}
              <form method="post" action="/mazo/{{mazo.id}}/agregar-carta">
                <input type="hidden" name="codigo_carta" value="{{this.codigo}}">
                <button type="submit">Agregar al mazo</button>
          </form>
          {{/if}}
          </li>
          {{/each}}

          </ul>
                
    </body>
</html>